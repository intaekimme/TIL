# REST API란?

1. ###  API (애플리케이션 프로그래밍 인터페이스) : 애플리케이션이나 디바이스가 서로 간에 연결하여 통신할 수 있는 방법을 정의하는 규칙 세트

   - 소비자에게 필요한 콘텐츠(호출)와 생산자에게 필요한 콘텐츠(응답)을 구성

2. ### REST API : REST(REpresentational State Transfer) 아키텍처 스타일의 디자인 원칙을 준수하는 API

   - 리소스 상태에 대한 표현을 요청자에게 전송, HTTP, JSON, HTML 또는 일반 텍스트 등의 형식으로 전송

   - REST API가 되려면 다음 기준을 따라야 한다.

     1. 클라이언트, 서버 및 리소스로 구성, 요청이 HTTP를 통해 관리되는 **클라이언트-서버 아키텍쳐**

        클라이언트가 알아야 하는 정보 : 요청된 리소스의 URI뿐, 다른 방법으로 서버와 상호작용 X

        서버 : HTTP를 통해 요청된 데이터에 전달하는 것 말고 애플리케이션 수정 X

     2. 스테이트리스(stateless) 클라이언트-서버 커뮤니케이션 : **요청 간에 클라이언트 정보 저장 X, 즉 서버측 세션을 필요로 하지 않는다.** 각 요청이 분리되어 있고 연결되어 있지 않음.

     3. 클라이언트-서버 상호 작용을 간소화 하는 **캐시 가능 데이터**

     4. 정보가 **표준 형식이 으로 전송**되도록 하기 위한 구성 요소 간 **통합 인터페이스**

        요청이 어디서 오는지 무관하게, 동일한 리소스에 대한 모든 API 요청이 동일하게 보여야 함.

     5. 요청된 정보를 검색하는 데 관련된 서버(보안, 로드 밸런싱 등을 담당)의 각 유형을 클라이언트가 볼 수 없는 계층 구조로 체계화하는 계층화된 시스템.

     6. 코드 온디맨드(선택 사항): 요청을 받으면 서버에서 클라이언트로 실행 가능한 코드를 전송하여 클라이언트 기능을 확장할 수 있는 기능. 

        

3. ### REST의 의미 좀 더 깊게 보기

   1. '**자원(resource)의 대표(representation)에 의한 상태 전달**'
      - 자원 : 해당 소프트웨어가 관리하는 모든 것
      - 자원의 대표 : 자원을 대표하기 위한 이름
      - 상태 전달 : 데이터가 요청되어지는 시점에서 자원의 상태(정보)를 전달하는 것
   2. 좁은 의미의 REST
      - **HTTP를 통해 CRUD를 실행하는 API**
      - HTTP 프로토콜을 이용하기 때문에 URL을 통해 자원을 특정지음
      - HTTP Verbs를 통해 할 일(CRUD)을 지정
      - JSON, XML을 통해 데이터를 주고 받음

4. ### CRUD

   1. Create, Read, Update, Delete (생성, 조회, 수정, 삭제)

   2. 

   3. | CRUD                        | HTTP verbs | Route         |
      | --------------------------- | ---------- | ------------- |
      | resource들의 목록을 표시    | GET        | /resource     |
      | resource 하나의 내용을 표시 | GET        | /resource/:id |
      | resource를 생성             | POST       | /resource     |
      | resource를 수정             | PUT        | /resource/:id |
      | resource를 삭제             | DELETE     | /resource/:id |

      **7 Standard Action** >> 위 CRUD를 **웹개발**에 맞게 좀 더 세분화 시킨 것

      - 자료를 웹사이트에서 생성하기 위해서 웹사이트는 2가지 일을 해야 합니다.
        1. **New** - 생성폼(form)을 사용자에게 보여주고,
        2. **Create** - 전달 받은 자료를 실제로 생성하는 과정이 필요합니다.
      - 마찬가지로 자료를 수정하기 위해서 2가지 일을 해야 합니다.
        1. **Edit** - 수정폼을 사용자에게 보여주고,
        2. **Update** - 전달 받은 자료를 바탕으로 현재 자료를 수정합니다.

      - 자료를 조회하는 방법에는 두가지가 있습니다.
        1. **Index** - 자료들의 목록을 조회합니다.
        2. **Show** - 하나의 자료를 상세히 보여줍니다.

      - 자료를 삭제하는 것은 form이 필요하지 않습니다.
        1. **Destroy** - 자료를 삭제합니다.

| **Action** | **http verbs** | **Route**          |
| ---------- | -------------- | ------------------ |
| index      | GET            | /*data*            |
| show       | GET            | /*data*/*:id*      |
| new        | GET            | /*data*/new        |
| create     | POST           | /*data*            |
| edit       | GET            | /*data*/*:id*/edit |
| update     | PUT            | /*data*/*:id*      |
| destroy    | DELETE         | /*data*/*:id*      |



5. ### HTTP 메서드 측면에서 API 작업 정의 

- **GET**은 지정된 URI에서 리소스의 표현을 검색합니다. 응답 메시지의 본문은 요청된 리소스의 세부 정보를 포함하고 있습니다.
- **POST**는 지정된 URI에 새 리소스를 만듭니다. 요청 메시지의 본문은 새 리소스의 세부 정보를 제공합니다. 참고로 POST를 사용하여 실제로 리소스를 만들지 않는 작업을 트리거할 수도 있습니다.
- **PUT**은 지정된 URI에 리소스를 만들거나 대체합니다. 요청 메시지의 본문은 만들 또는 업데이트할 리소스를 지정합니다.
- **DELETE**는 지정된 URI의 리소스를 제거합니다.

**POST, PUT 차이**

- **POST** 요청은 **리소스를 만듭니다**. 서버는 **새 리소스에 대한 URI를 할당**하고 클라이언트에 해당 URI를 반환합니다. REST 모델에서는 **컬렉션에 POST 요청을 자주 적용**합니다. 새 리소스가 컬렉션에 추가됩니다. POST 요청은 새 리소스를 만들지 않고 **기존 리소스에 처리할 데이터를 보내는데** 사용할 수도 있습니다.
- **PUT** 요청은 **리소스를 만들거나** *또는* **기존 리소스를 업데이트**합니다. 클라이언트는 리소스의 URI를 지정합니다. 요청 본문에는 리소스의 완전한 표현이 포함됩니다. **이 URI를 사용하는 리소스가 이미 있으면 리소스가 대체**됩니다. **아직 없고 서버에서 리소스 만들기를 지원하는 경우 새 리소스가 생성**됩니다. **PUT** 요청은 컬렉션보다는 특정 고객 같은 **개별 항목인 리소스에 가장 자주 적용**됩니다. 서버에서 PUT을 통한 업데이트를 지원하지만 만들기는 지원하지 않을 수 있습니다. **PUT을 통한 만들기 지원 여부**는 리소스가 존재하기 전에 **클라이언트가 의미 있는 방법으로 리소스에 URI를 할당할 수 있는지 여부에 따라 결정**됩니다. 할당할 수 없는 경우 POST를 사용하여 리소스를 만들고 PUT 또는 PATCH를 사용하여 업데이트합니다.



6. ### HTTP 의미 체계 준수

### GET 메서드

**성공**적인 GET 메서드는 일반적으로 HTTP 상태 코드 **200**(정상)를 반환합니다. **리소스를 찾을 수 없는 경우** 메서드가 **404**(찾을 수 없음)를 반환해야 합니다.

**요청이 처리되었지만 HTTP 응답에 포함된 respose 본문이 없는 경우** HTTP 상태 코드 **204**(콘텐츠 없음)를 반환해야 합니다. 예를 들어 일치 항목이 없는 검색 작업은 이 동작으로 구현될 수 있습니다.

### POST 메서드

**POST** 메서드는 **새 리소스를 만드는 경우** HTTP 상태 코드 **201**(만들어짐)을 반환합니다. **새 리소스의 URI는 응답의 Location 헤더에 포함**됩니다. **응답 본문**은 **리소스의 표현을 포함**합니다.

이 메서드가 일부 처리를 수행하지만 **새 리소스를 만들지 않는 경우** 메서드는 HTTP 상태 코드 **200**을 반환하고 작업의 결과를 응답 본문에 포함할 수 있습니다. 또는 **반환할 결과가 없으면** 메서드가 응답 본문 없이 HTTP 상태 코드 **204**(내용 없음)를 반환할 수 있습니다.

**클라이언트가 잘못된 데이터를 요청에 배치**하면 서버에서 HTTP 상태 코드 **400**(잘못된 요청)을 반환해야 합니다. **응답 본문**에는 **오류에 대한 추가 정보** 또는 자세한 정보를 제공하는 **URI 링크가 포함**될 수 있습니다.

### PUT 메서드

**PUT** 메서드는 POST 메서드와 마찬가지로 **새 리소스를 만드는 경우** HTTP 상태 코드 **201**(만들어짐)을 반환합니다. 이 메서드는 **기존 리소스를 업데이트**할 경우 **200**(정상) 또는 **204**(내용 없음)를 반환합니다. 상황에 따라 **기존 리소스를 업데이트할 수 없는 경우**도 있습니다. 이 경우 HTTP 상태 코드 **409**(충돌)를 반환하는 방안을 고려해야 합니다.

컬렉션의 복수 리소스에 대한 업데이트를 일괄 처리할 수 있는 일괄 HTTP PUT 작업의 구현을 생각해 보겠습니다. PUT 요청은 컬렉션의 URI를 지정해야 하며, 요청 본문에 수정할 리소스의 세부 정보를 지정해야 합니다. 이 접근 방식은 데이터 전송량을 줄이고 성능을 향상시킬 수 있습니다.

### DELETE 메서드

**삭제 작업이 성공**하면 웹 서버는 프로세스가 성공적으로 처리되었지만 응답 본문에 추가 정보가 없음을 나타내는 HTTP 상태 코드 **204**(콘텐츠 없음)로 응답해야 합니다. **리소스가 없는 경우** 웹 서버는 HTTP **404**(찾을 수 없음)를 반환할 수 있습니다.



참고자료

1. REST API(RESTful API, 레스트풀 API)란? 구현 및 사용법
   - https://www.redhat.com/ko/topics/api/what-is-a-rest-api
2. REST와 RESTful API
   - https://www.a-mean-blog.com/ko/blog/%ED%86%A0%EB%A7%89%EA%B8%80/_/REST%EC%99%80-RESTful-API
3. CRUD와 7 Standard Action
   - https://www.a-mean-blog.com/ko/blog/Node-JS-%EC%B2%AB%EA%B1%B8%EC%9D%8C/%EC%A3%BC%EC%86%8C%EB%A1%9D-%EB%A7%8C%EB%93%A4%EA%B8%B0/CRUD%EC%99%80-7-Standard-Actions
4. REST API란?
   - https://www.ibm.com/kr-ko/cloud/learn/rest-apis
5. RESTful 웹 API 디자인
   - https://docs.microsoft.com/ko-kr/azure/architecture/best-practices/api-design